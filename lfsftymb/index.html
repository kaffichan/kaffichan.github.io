<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Полный тест БЖД</title>
    <style>
        :root {
            --primary: #0056b3; /* Строгий синий */
            --primary-light: #e7f1ff;
            --success: #28a745;
            --error: #dc3545;
            --text: #212529;
            --bg: #f8f9fa;
            --card-bg: #ffffff;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            display: flex;
            justify-content: center;
            min-height: 100vh;
            padding: 15px;
        }

        #app-container {
            width: 100%;
            max-width: 600px;
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* --- Screens --- */
        .screen {
            padding: 30px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 500px;
            text-align: center;
        }

        .hidden { display: none !important; }

        /* --- Typography & Elements --- */
        h1 { font-size: 22px; margin-bottom: 15px; color: var(--primary); }
        p { font-size: 16px; line-height: 1.5; color: #555; margin-bottom: 25px; }

        .btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 16px 32px;
            font-size: 18px;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            max-width: 300px;
            transition: opacity 0.2s;
            font-weight: 600;
        }
        .btn:active { opacity: 0.8; }

        /* --- Quiz Interface --- */
        .status-bar {
            width: 100%;
            padding: 15px 20px;
            background: #fff;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            color: #777;
            font-weight: bold;
        }

        .question-box {
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px 0;
            font-size: 18px;
            font-weight: 500;
            line-height: 1.4;
        }

        .options-grid {
            width: 100%;
            display: grid;
            gap: 12px;
            margin-top: auto;
        }

        .option-btn {
            background: #fff;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            font-size: 16px;
            color: var(--text);
            text-align: left;
            cursor: pointer;
            transition: all 0.2s;
            outline: none;
            -webkit-tap-highlight-color: transparent;
        }

        .option-btn:active { background-color: var(--primary-light); }

        /* Feedback Styles */
        .option-btn.correct {
            background-color: var(--success);
            color: white;
            border-color: var(--success);
        }
        .option-btn.wrong {
            background-color: var(--error);
            color: white;
            border-color: var(--error);
        }
        .disabled { pointer-events: none; }

        /* --- Result Screen --- */
        .score-display {
            font-size: 48px;
            font-weight: bold;
            color: var(--primary);
            margin: 20px 0;
        }
    </style>
</head>
<body>

<div id="app-container">
    <div id="start-screen" class="screen">
        <h1>Терминология БЖД</h1>
        <p>Полный тест на знание определений.<br>Вопросы составлены дословно по учебным материалам.</p>
        <p style="font-size: 14px; color: #888;">Всего вопросов: <span id="total-q-count"></span></p>
        <button class="btn" onclick="app.start()">Начать тест</button>
    </div>

    <div id="quiz-screen" class="screen hidden" style="justify-content: flex-start;">
        <div class="status-bar">
            <span id="counter">Вопрос 1</span>
            <span id="score">Баллы: 0</span>
        </div>
        
        <div class="question-box" id="question-text">
            Загрузка...
        </div>

        <div class="options-grid" id="options-container">
            </div>
    </div>

    <div id="result-screen" class="screen hidden">
        <h1>Тест завершен</h1>
        <div class="score-display" id="final-percent">0%</div>
        <p id="final-text">Вы ответили верно на X вопросов.</p>
        <button class="btn" onclick="app.restart()">Пройти заново</button>
    </div>
</div>

<script>
    /**
     * Полная база данных терминов из lifesafety_terms.docx
     * Определения приведены в полное соответствие с источником.
     */
    const database = [
        { 
            term: "Техносфера", 
            def: "представляет собой искусственно созданную человеком среду обитания, включающую здания, сооружения, транспорт, коммуникации и технологическое оборудование." 
        },
        { 
            term: "Гомосфера", 
            def: "область пространства вокруг человека, в которой находятся рабочие места и бытовые условия проживания." 
        },
        { 
            term: "Ноксосфера", 
            def: "включает факторы, способные вызвать заболевание организма или привести к несчастному случаю на производстве." 
        },
        { 
            term: "Производственный травматизм", 
            def: "возникает вследствие несоблюдения норм охраны труда и техники безопасности." 
        },
        { 
            term: "Скрытый пожар", 
            def: "это возгорание, которое начинается незаметно внутри конструкций зданий, оборудования или материалов." 
        },
        { 
            term: "Горение", 
            def: "химический процесс окисления топлива кислородом воздуха, сопровождающийся выделением тепла и света." 
        },
        { 
            term: "Безопасность", 
            def: "состояние защищённости человека, общества и окружающей среды от угроз и воздействий, которые могут нанести ущерб здоровью, имуществу или экологии." 
        },
        { 
            term: "Опасность", 
            def: "совокупность факторов, угрожающих здоровью, жизни, состоянию имущества или экосистемы." 
        },
        { 
            term: "Окружающая среда", 
            def: "система природных и антропогенных компонентов (воздух, вода, почва, флора, фауна, объекты строительства и промышленности), взаимодействующих друг с другом и оказывающих прямое или косвенное влияние на жизнь и здоровье человека." 
        },
        { 
            term: "Риск", 
            def: "вероятность наступления неблагоприятных событий и последствия этих событий для человека, природы или экономики." 
        },
        { 
            term: "Шаговое напряжение", 
            def: "потенциал электрического напряжения, возникающий между ногами человека, стоящего на земле вблизи повреждённого электроприбора или оборванного провода." 
        },
        { 
            term: "Вредные вещества", 
            def: "соединения и элементы, негативно влияющие на здоровье человека при контакте, попадании внутрь организма или длительном пребывании в среде, содержащей эти вещества." 
        },
        { 
            term: "Предельно допустимая концентрация (ПДК)", 
            def: "максимальное содержание загрязняющего вещества в воздухе, воде или почве, длительное пребывание в котором не вызывает отрицательных эффектов на здоровье человека." 
        },
        { 
            term: "Физиология труда", 
            def: "наука, изучающая реакции организма на трудовую нагрузку, определяющая оптимальные режимы работы и отдыха, способствующие сохранению работоспособности и профилактике переутомления." 
        },
        { 
            term: "Классы условий труда", 
            def: "критерии классификации условий трудовой деятельности по уровню воздействия вредных и опасных факторов." 
        },
        { 
            term: "Работоспособность", 
            def: "способность человека продуктивно выполнять работу определённого объёма и интенсивности в заданных временных рамках." 
        },
        { 
            term: "Микроклимат", 
            def: "совокупность метеорологических характеристик воздушной среды помещения, влияющих на самочувствие и производительность человека." 
        },
        { 
            term: "Эргономика", 
            def: "дисциплина, занимающаяся проектированием рабочих пространств, инструментов и процессов таким образом, чтобы обеспечить комфорт, эффективность и безопасность труда." 
        },
        { 
            term: "Охрана труда", 
            def: "комплекс правовых, социально-экономических, санитарно-гигиенических, лечебно-профилактических и реабилитационных мероприятий, обеспечивающих сохранение здоровья и работоспособности сотрудников на рабочем месте." 
        },
        { 
            term: "Пожар", 
            def: "неконтролируемое распространение огня, сопровождающееся повреждением материальных ценностей, нарушением экологического равновесия и угрозой жизни и здоровью людей." 
        },
        { 
            term: "Пожарная профилактика", 
            def: "система действий, направленная на предупреждение возникновения пожаров путём соблюдения нормативных требований, инструкций и стандартов безопасности." 
        },
        { 
            term: "Авария", 
            def: "внезапное нарушение нормального функционирования технического устройства, процесса или системы, связанное с разрушением сооружений, выходом из строя механизмов и созданием угрозы жизни и здоровью людей." 
        },
        { 
            term: "Катастрофа", 
            def: "крупномасштабная авария или природное явление, повлекшие значительные разрушения, жертвы среди населения и серьёзный экономический ущерб." 
        },
        { 
            term: "Стихийное бедствие", 
            def: "внезапно возникшее экстремальное природное событие (землетрясение, цунами, шторм, наводнение), несущее опасность людям и инфраструктуре." 
        },
        { 
            term: "Эвакуация", 
            def: "организованное срочное удаление людей из районов, подвергшихся воздействию стихии, аварии или иной чрезвычайной ситуации." 
        },
        { 
            term: "Рассредоточение", 
            def: "заблаговременное распределение важных объектов и учреждений (например, промышленных предприятий, медицинских центров) по территории, снижающее риск одновременного ущерба в результате крупных катастроф." 
        },
        { 
            term: "Отселение", 
            def: "временная или постоянная миграция населения из района, подверженного воздействию экологической катастрофы, природного катаклизма или военных действий." 
        },
        { 
            term: "Дегазация", 
            def: "процедура нейтрализации ядовитых газов и паров в помещениях, оборудовании и средствах индивидуальной защиты." 
        },
        { 
            term: "Дезактивация", 
            def: "удаление радиоактивных частиц и загрязнителей с местности, транспортных средств, продуктов питания и иных объектов, подвергшихся радиоактивному загрязнению." 
        },
        { 
            term: "Дезинфекция", 
            def: "уничтожение болезнетворных бактерий и вирусов на поверхности, предметах быта, продуктах питания с целью предупреждения инфекционных заболеваний." 
        }
    ];

    const app = {
        questions: [],
        currentIndex: 0,
        score: 0,
        
        // HTML Elements cache
        els: {
            start: document.getElementById('start-screen'),
            quiz: document.getElementById('quiz-screen'),
            result: document.getElementById('result-screen'),
            totalCount: document.getElementById('total-q-count'),
            qText: document.getElementById('question-text'),
            optsContainer: document.getElementById('options-container'),
            counter: document.getElementById('counter'),
            score: document.getElementById('score'),
            finalPercent: document.getElementById('final-percent'),
            finalText: document.getElementById('final-text')
        },

        init() {
            this.els.totalCount.innerText = database.length;
        },

        start() {
            // Shuffle database for this round
            this.questions = [...database].sort(() => Math.random() - 0.5);
            this.currentIndex = 0;
            this.score = 0;
            
            this.els.start.classList.add('hidden');
            this.els.result.classList.add('hidden');
            this.els.quiz.classList.remove('hidden');
            
            this.renderQuestion();
        },

        restart() {
            this.init();
            this.els.result.classList.add('hidden');
            this.els.start.classList.remove('hidden');
        },

        renderQuestion() {
            const currentQ = this.questions[this.currentIndex];
            
            // Update UI
            this.els.counter.innerText = `Вопрос ${this.currentIndex + 1}/${this.questions.length}`;
            this.els.score.innerText = `Баллы: ${this.score}`;
            
            // Format definition (Capitalize first letter if needed)
            let defText = currentQ.def;
            defText = defText.charAt(0).toUpperCase() + defText.slice(1);
            this.els.qText.innerText = defText;

            // Generate Options
            this.els.optsContainer.innerHTML = '';
            
            // Create options array: 1 correct + 3 random distinct distractors
            let options = [currentQ.term];
            let pool = database.filter(i => i.term !== currentQ.term);
            
            // Shuffle pool and take 3
            pool.sort(() => Math.random() - 0.5);
            options.push(...pool.slice(0, 3).map(i => i.term));
            
            // Shuffle options for display
            options.sort(() => Math.random() - 0.5);

            options.forEach(optText => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerText = optText;
                btn.onclick = (e) => this.handleAnswer(e.target, optText, currentQ.term);
                this.els.optsContainer.appendChild(btn);
            });
        },

        handleAnswer(btn, selected, correct) {
            // Prevent double clicking
            const allBtns = this.els.optsContainer.querySelectorAll('.option-btn');
            allBtns.forEach(b => b.classList.add('disabled'));

            if (selected === correct) {
                btn.classList.add('correct');
                this.score++;
            } else {
                btn.classList.add('wrong');
                // Highlight correct
                allBtns.forEach(b => {
                    if (b.innerText === correct) b.classList.add('correct');
                });
            }

            // Delay for next question
            setTimeout(() => {
                this.currentIndex++;
                if (this.currentIndex < this.questions.length) {
                    this.renderQuestion();
                } else {
                    this.finish();
                }
            }, 1200);
        },

        finish() {
            this.els.quiz.classList.add('hidden');
            this.els.result.classList.remove('hidden');
            
            const percent = Math.round((this.score / this.questions.length) * 100);
            this.els.finalPercent.innerText = `${percent}%`;
            this.els.finalText.innerText = `Вы ответили верно на ${this.score} из ${this.questions.length} вопросов.`;
            
            // Color coding result
            if(percent >= 80) this.els.finalPercent.style.color = 'var(--success)';
            else if(percent >= 50) this.els.finalPercent.style.color = '#ffc107'; // orange
            else this.els.finalPercent.style.color = 'var(--error)';
        }
    };

    // Run init on load
    window.onload = () => app.init();

</script>
</body>
</html>